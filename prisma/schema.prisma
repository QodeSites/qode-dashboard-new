generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["public"]
}

model account_access {
  id                                                  Int      @id @default(autoincrement())
  source_account_id                                   String
  target_account_id                                   String
  access_level                                        String   @default("read")
  created_at                                          DateTime @default(now())
  accounts_account_access_source_account_idToaccounts accounts @relation("account_access_source_account_idToaccounts", fields: [source_account_id], references: [qcode])
  accounts_account_access_target_account_idToaccounts accounts @relation("account_access_target_account_idToaccounts", fields: [target_account_id], references: [qcode])

  @@unique([source_account_id, target_account_id], map: "source_target_unique")
  @@schema("public")
}

model accounts {
  id                                                        Int                          @id @default(autoincrement())
  account_id                                                String?                      @unique
  qcode                                                     String                       @unique @default(dbgenerated("('QAC'::text || lpad((nextval('accounts_qcode_seq'::regclass))::text, 5, '0'::text))"))
  account_name                                              String
  broker                                                    String
  account_type                                              String
  email_linked                                              String?
  contact_number                                            String?
  login_id                                                  String?
  login_password                                            String?
  totp_secret                                               String?
  api_details                                               Json?
  nominees                                                  String?
  aadhar                                                    String?
  pan                                                       String?
  remarks                                                   String?                      @default("NA")
  created_at                                                DateTime                     @default(now())
  strategy                                                  String?
  account_access_account_access_source_account_idToaccounts account_access[]             @relation("account_access_source_account_idToaccounts")
  account_access_account_access_target_account_idToaccounts account_access[]             @relation("account_access_target_account_idToaccounts")
  account_custodian_codes                                   account_custodian_codes[]
  pooled_account_allocations                                pooled_account_allocations[]
  pooled_account_users                                      pooled_account_users[]

  @@schema("public")
}

model allocation_table_pms {
  id             Int       @id @default(autoincrement())
  date           DateTime  @db.Date
  stock_name     String    @db.VarChar(200)
  asset_class    String    @db.VarChar(50)
  sector         String    @db.VarChar(50)
  strategy_code  String    @db.VarChar(10)
  qcode          String    @db.VarChar(10)
  custodian_code String    @db.VarChar(10)
  total_percent  Decimal   @db.Decimal
  units          Decimal   @db.Decimal
  rate           Decimal   @db.Decimal
  value          Decimal   @db.Decimal
  total          Decimal   @db.Decimal
  created_at     DateTime? @default(now()) @db.Timestamp(6)

  @@schema("public")
}

model capital_in_out {
  id             Int       @id @default(autoincrement())
  qcode          String    @db.VarChar(20)
  date           DateTime  @db.Date
  account        String    @db.VarChar(100)
  system_tag     String    @db.VarChar(50)
  capital_in_out Decimal   @db.Decimal(15, 2)
  custom_fields  Json?     @db.Json
  status         String?   @default("P") @db.Char(1)
  created_at     DateTime? @default(now()) @db.Timestamp(6)
  updated_at     DateTime? @db.Timestamp(6)
  updated_by     Int?

  @@index([date], map: "idx_capital_in_out_date")
  @@index([qcode], map: "idx_capital_in_out_qcode")
  @@schema("public")
}

model clients {
  id                         Int                          @id(map: "users_pkey") @default(autoincrement())
  user_id                    String                       @unique(map: "users_user_id_key")
  icode                      String                       @unique(map: "users_icode_key") @default(dbgenerated("('QUS'::text || lpad((nextval('clients_icode_seq'::regclass))::text, 4, '0'::text))"))
  user_name                  String
  email                      String
  contact_number             String
  birth_date                 DateTime?
  birth_time                 String?
  birth_location             String?
  mother_name                String?
  father_name                String?
  husband_name               String?
  nominees                   String?
  emergency_contact_name     String?
  emergency_contact_number   String?
  aadhar                     String?
  pan                        String?
  residential_address        String?
  gender                     String?
  occupation                 String?
  remarks                    String?                      @default("NA")
  created_at                 DateTime                     @default(now())
  password                   String?
  pooled_account_allocations pooled_account_allocations[]
  pooled_account_users       pooled_account_users[]

  @@schema("public")
}

model equity_holding {
  qcode             String?   @db.VarChar(50)
  date              DateTime? @db.Date
  symbol            String?   @db.VarChar(20)
  mastersheet_tag   String?   @db.VarChar(100)
  exchange          String?   @db.VarChar(50)
  quantity          Int?
  avg_price         Decimal?  @db.Decimal(10, 2)
  broker            String?   @db.VarChar(100)
  debt_equity       String?   @db.VarChar(20)
  sub_category      String?   @db.VarChar(100)
  ltp               Decimal?  @db.Decimal(10, 2)
  buy_value         Decimal?  @db.Decimal(15, 2)
  value_as_of_today Decimal?  @db.Decimal(15, 2)
  pnl_amount        Decimal?  @db.Decimal(15, 2)
  percent_pnl       Decimal?  @db.Decimal(5, 2)
  id                BigInt    @id @default(autoincrement())

  @@schema("public")
}

model gold_tradebook {
  id              Int       @id @default(autoincrement())
  qcode           String    @db.VarChar(20)
  account_name    String    @db.VarChar(100)
  mastersheet_tag String    @db.VarChar(100)
  action          String    @db.VarChar(10)
  basket          String    @db.VarChar(50)
  date            DateTime  @db.Date
  trade_type      String    @db.VarChar(10)
  symbol          String    @db.VarChar(200)
  expiry          DateTime  @db.Date
  exchange        String    @db.VarChar(10)
  quantity        Int
  lotsize         Int
  no_of_lots      Int
  price           Decimal   @db.Decimal(15, 4)
  exposure        Decimal   @db.Decimal(18, 4)
  custom_fields   Json?     @db.Json
  status          String?   @default("P") @db.Char(1)
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  updated_at      DateTime? @db.Timestamp(6)
  updated_by      Int?

  @@index([date], map: "idx_gold_tradebook_date")
  @@index([qcode], map: "idx_gold_tradebook_qcode")
  @@index([symbol], map: "idx_gold_tradebook_symbol")
  @@schema("public")
}

model liquidbees_tradebook {
  id              Int       @id @default(autoincrement())
  qcode           String    @db.VarChar(20)
  account         String    @db.VarChar(100)
  mastersheet_tag String    @db.VarChar(50)
  date            DateTime  @db.Date
  trade_type      String    @db.VarChar(10)
  symbol          String    @db.VarChar(150)
  exchange        String    @db.VarChar(10)
  quantity        Int
  price           Decimal   @db.Decimal(15, 2)
  broker          String    @db.VarChar(50)
  debt_equity     String    @db.Char(6)
  collateral      String    @db.Char(8)
  sub_category    String    @db.VarChar(50)
  custom_fields   Json?     @db.Json
  status          String?   @default("P") @db.Char(1)
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  updated_at      DateTime? @db.Timestamp(6)
  updated_by      Int?

  @@index([date], map: "idx_liquidbees_tradebook_date")
  @@index([qcode], map: "idx_liquidbees_tradebook_qcode")
  @@index([symbol], map: "idx_liquidbees_tradebook_symbol")
  @@schema("public")
}

model master_sheet {
  id                   Int       @id @default(autoincrement())
  qcode                String    @db.VarChar(20)
  date                 DateTime  @db.Date
  portfolio_value      Decimal?  @db.Decimal(20, 4)
  capital_in_out       Decimal?  @db.Decimal(20, 4)
  nav                  Decimal?  @db.Decimal(20, 4)
  prev_nav             Decimal?  @db.Decimal(20, 4)
  pnl                  Decimal?  @db.Decimal(20, 4)
  daily_p_l            Decimal?  @db.Decimal(20, 4)
  exposure_value       Decimal?  @db.Decimal(20, 4)
  prev_portfolio_value Decimal?  @db.Decimal(20, 4)
  prev_exposure_value  Decimal?  @db.Decimal(20, 4)
  prev_pnl             Decimal?  @db.Decimal(20, 4)
  drawdown             Decimal?  @db.Decimal(20, 4)
  system_tag           String?   @db.VarChar(50)
  created_at           DateTime? @default(now()) @db.Date

  @@schema("public")
}

model mutual_fund_holding {
  id              Int       @id @default(autoincrement())
  qcode           String    @db.VarChar(20)
  account_name    String    @db.VarChar(100)
  mastersheet_tag String    @db.VarChar(50)
  date            DateTime  @db.Date
  trade_type      String    @db.VarChar(10)
  symbol          String    @db.VarChar(300)
  isin            String    @db.VarChar(12)
  quantity        Decimal   @db.Decimal(15, 3)
  price           Decimal   @db.Decimal(15, 5)
  broker          String    @db.VarChar(50)
  debt_equity     String    @db.Char(6)
  collateral      String    @db.Char(8)
  sub_category    String    @db.VarChar(50)
  custom_fields   Json?     @db.Json
  status          String?   @default("P") @db.Char(1)
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  updated_at      DateTime? @db.Timestamp(6)
  updated_by      Int?

  @@index([date], map: "idx_mutual_fund_holding_date")
  @@index([qcode], map: "idx_mutual_fund_holding_qcode")
  @@index([symbol], map: "idx_mutual_fund_holding_symbol")
  @@schema("public")
}

model pooled_account_allocations {
  id                  Int       @id @default(autoincrement())
  qcode               String?
  icode               String?
  allocation_date     DateTime  @db.Date
  contribution_amount Decimal?  @db.Decimal
  allocation_percent  Decimal?  @db.Decimal
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  clients             clients?  @relation(fields: [icode], references: [icode], onDelete: Restrict)
  accounts            accounts? @relation(fields: [qcode], references: [qcode], onDelete: NoAction, onUpdate: NoAction)

  @@unique([qcode, icode, allocation_date])
  @@schema("public")
}

model pooled_account_users {
  id           Int      @id @default(autoincrement())
  qcode        String
  icode        String
  access_level String   @default("read")
  created_at   DateTime @default(now())
  accounts     accounts @relation(fields: [qcode], references: [qcode], map: "pooled_account_users_account_id_fkey")
  clients      clients  @relation(fields: [icode], references: [icode], map: "pooled_account_users_user_id_fkey")

  @@unique([qcode, icode], map: "pooled_account_users_account_id_user_id_key")
  @@schema("public")
}

model slippage {
  id             Int       @id @default(autoincrement())
  qcode          String    @db.VarChar(20)
  date           DateTime  @db.Date
  account        String    @db.VarChar(100)
  system_tag     String    @db.VarChar(50)
  capital_in_out Decimal   @db.Decimal(15, 2)
  custom_fields  Json?     @db.Json
  status         String?   @default("P") @db.Char(1)
  created_at     DateTime? @default(now()) @db.Timestamp(6)
  updated_at     DateTime? @db.Timestamp(6)
  updated_by     Int?

  @@index([date], map: "idx_slippage_date")
  @@index([qcode], map: "idx_slippage_qcode")
  @@schema("public")
}

model tradebook {
  id                    Int       @id @default(autoincrement())
  qcode                 String    @db.VarChar(20)
  timestamp_entry       DateTime  @db.Timestamp(6)
  system_tag_entry      String    @db.VarChar(50)
  action_entry          String    @db.Char(4)
  symbol_entry          String    @db.VarChar(150)
  price_entry           Decimal   @db.Decimal(15, 2)
  qty_entry             Int
  contract_value_entry  Decimal   @db.Decimal(15, 2)
  timestamp_exit        DateTime? @db.Timestamp(6)
  system_tag_exit       String?   @db.VarChar(50)
  action_exit           String?   @db.Char(4)
  symbol_exit           String?   @db.VarChar(150)
  price_exit            Decimal?  @db.Decimal(15, 2)
  qty_exit              Int?
  contract_value_exit   Decimal?  @db.Decimal(15, 2)
  pnl_amount            Decimal?  @db.Decimal(15, 2)
  pnl_amount_settlement Decimal?  @db.Decimal(15, 2)
  custom_fields         Json?     @db.Json
  status                String?   @default("P") @db.Char(1)
  created_at            DateTime? @default(now()) @db.Timestamp(6)
  updated_at            DateTime? @db.Timestamp(6)
  updated_by            Int?

  @@index([qcode], map: "idx_tradebook_qcode")
  @@index([symbol_entry], map: "idx_tradebook_symbol_entry")
  @@index([timestamp_entry], map: "idx_tradebook_timestamp_entry")
  @@schema("public")
}

model account_custodian_codes {
  id             Int      @id @default(autoincrement())
  qcode          String   @db.VarChar(20)
  custodian_code String   @db.VarChar(50)
  created_at     DateTime @default(now()) @db.Timestamptz(6)
  accounts       accounts @relation(fields: [qcode], references: [qcode], onDelete: Cascade, onUpdate: NoAction, map: "fk_account_custodian_codes_account")

  @@unique([qcode, custodian_code], map: "uq_account_custodian_codes_qcode_custodian_code")
  @@index([qcode], map: "idx_account_custodian_codes_qcode")
  @@schema("public")
}

model pms_master_sheet {
  id                        Int       @id @default(autoincrement())
  client_name               String    @db.VarChar(255)
  account_code              String    @db.VarChar(50)
  report_date               DateTime  @db.Date
  portfolio_value           Decimal?  @db.Decimal(20, 2)
  cash_in_out               Decimal?  @db.Decimal(20, 2)
  nav                       Decimal?  @db.Decimal(20, 4)
  prev_nav                  Decimal?  @db.Decimal(20, 4)
  pnl                       Decimal?  @db.Decimal(20, 2)
  pnl_percent               Decimal?  @db.Decimal(10, 2)
  prev_pnl                  Decimal?  @db.Decimal(20, 2)
  prev_portfolio_value      Decimal?  @db.Decimal(20, 2)
  drawdown_percent          Decimal?  @db.Decimal(10, 2)
  period_return_percent     Decimal?  @db.Decimal(10, 4)
  cumulative_return_percent Decimal?  @db.Decimal(10, 4)
  created_at                DateTime? @default(now()) @db.Timestamptz(6)

  @@schema("public")
}

model master_sheet_test {
  id                   Int       @id @default(autoincrement())
  qcode                String    @db.VarChar(20)
  date                 DateTime  @db.Date
  portfolio_value      Decimal?  @db.Decimal(20, 4)
  capital_in_out       Decimal?  @db.Decimal(20, 4)
  nav                  Decimal?  @db.Decimal(20, 4)
  prev_nav             Decimal?  @db.Decimal(20, 4)
  pnl                  Decimal?  @db.Decimal(20, 4)
  daily_p_l            Decimal?  @db.Decimal(20, 4)
  exposure_value       Decimal?  @db.Decimal(20, 4)
  prev_portfolio_value Decimal?  @db.Decimal(20, 4)
  prev_exposure_value  Decimal?  @db.Decimal(20, 4)
  prev_pnl             Decimal?  @db.Decimal(20, 4)
  drawdown             Decimal?  @db.Decimal(20, 4)
  system_tag           String?   @db.VarChar(50)
  created_at           DateTime? @default(now()) @db.Date

  @@schema("public")
}

model equity_holding_test {
  qcode             String?   @db.VarChar(50)
  date              DateTime? @db.Date
  symbol            String?   @db.VarChar(20)
  mastersheet_tag   String?   @db.VarChar(100)
  exchange          String?   @db.VarChar(50)
  quantity          Int?
  avg_price         Decimal?  @db.Decimal(10, 2)
  broker            String?   @db.VarChar(100)
  debt_equity       String?   @db.VarChar(20)
  sub_category      String?   @db.VarChar(100)
  ltp               Decimal?  @db.Decimal(10, 2)
  buy_value         Decimal?  @db.Decimal(15, 2)
  value_as_of_today Decimal?  @db.Decimal(15, 2)
  pnl_amount        Decimal?  @db.Decimal(15, 2)
  percent_pnl       Decimal?  @db.Decimal(5, 2)
  id                Int       @id @default(autoincrement())

  @@schema("public")
}

model holding_sync_logs {
  id                BigInt   @id @default(autoincrement())
  qcode             String   @db.VarChar(50)
  client_name       String?  @db.VarChar(255)
  sync_type         String   @db.VarChar(50)
  sync_status       String   @db.VarChar(20)
  records_deleted   Int?
  records_inserted  Int?
  records_processed Int?
  error_message     String?
  sync_timestamp    DateTime @db.Timestamp(6)
  created_at        DateTime @default(now()) @db.Timestamp(6)

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model master_sheet_sync_logs {
  id                Int      @id @default(autoincrement())
  qcode             String   @db.VarChar(20)
  client_name       String?  @db.VarChar(255)
  sync_status       String   @db.VarChar(20)
  records_deleted   Int      @default(0)
  records_inserted  Int      @default(0)
  records_processed Int      @default(0)
  error_message     String?
  sync_timestamp    DateTime @db.Timestamptz(6)
  created_at        DateTime @default(now()) @db.Timestamptz(6)

  @@index([qcode], map: "idx_master_sheet_sync_logs_qcode")
  @@index([sync_timestamp], map: "idx_master_sheet_sync_logs_sync_timestamp")
  @@schema("public")
}

model mutual_fund_holding_sheet {
  id                BigInt    @id @default(autoincrement())
  qcode             String?
  as_of_date        DateTime? @db.Date
  symbol            String?
  isin              String?
  scheme_code       String?
  quantity          Decimal?  @db.Decimal(20, 6)
  avg_price         Decimal?  @db.Decimal(18, 4)
  broker            String?
  debt_equity       String?
  mastersheet_tag   String?
  sub_category      String?
  nav               Decimal?  @db.Decimal(18, 4)
  buy_value         Decimal?  @db.Decimal(18, 2)
  value_as_of_today Decimal?  @db.Decimal(18, 2)
  pnl_amount        Decimal?  @db.Decimal(18, 2)
  percent_pnl       Decimal?  @db.Decimal(9, 4)

  @@schema("public")
}

model mutual_fund_holding_sheet_test {
  qcode             String?
  as_of_date        DateTime? @db.Date
  symbol            String?
  isin              String?
  scheme_code       String?
  quantity          Decimal?  @db.Decimal(20, 6)
  avg_price         Decimal?  @db.Decimal(18, 4)
  broker            String?
  debt_equity       String?
  mastersheet_tag   String?
  sub_category      String?
  nav               Decimal?  @db.Decimal(18, 4)
  buy_value         Decimal?  @db.Decimal(18, 2)
  value_as_of_today Decimal?  @db.Decimal(18, 2)
  pnl_amount        Decimal?  @db.Decimal(18, 2)
  percent_pnl       Decimal?  @db.Decimal(9, 4)
  id                Int       @id @default(autoincrement())

  @@schema("public")
}

model orbis_master_sheet {
  id                   Int       @id @default(autoincrement())
  person_name          String    @db.VarChar(255)
  orbis_code           String?   @db.VarChar(20)
  date                 DateTime? @db.Date
  capital_amount       Decimal?  @db.Decimal(20, 2)
  unit_balance         Decimal?  @db.Decimal(20, 4)
  market_value         Decimal?  @db.Decimal(20, 2)
  nav                  Decimal?  @db.Decimal(20, 4)
  opening_unit_balance Decimal?  @db.Decimal(20, 4)
  units_allotted       Decimal?  @db.Decimal(20, 4)
  units_redeemed       Decimal?  @db.Decimal(20, 4)
  closing_unit_balance Decimal?  @db.Decimal(20, 4)
  capital_investment   Decimal?  @db.Decimal(20, 2)
  capital_redemption   Decimal?  @db.Decimal(20, 2)
  management_fees      Decimal?  @db.Decimal(20, 2)
  other_fees           Decimal?  @db.Decimal(20, 2)
  net_capital_flow     Decimal?  @db.Decimal(20, 2)
  created_at           DateTime? @default(now()) @db.Timestamp(6)
  updated_at           DateTime? @default(now()) @db.Timestamp(6)
  nuvama_code          String?

  @@index([orbis_code], map: "idx_orbis_code")
  @@index([date], map: "idx_orbis_date")
  @@index([person_name], map: "idx_orbis_person_name")
  @@schema("public")
}

model password_reset_tokens {
  id         BigInt   @id @default(autoincrement())
  email      String
  token_hash String
  expires_at DateTime @db.Timestamptz(6)
  used       Boolean  @default(false)
  created_at DateTime @default(now()) @db.Timestamptz(6)

  @@index([email], map: "idx_password_reset_tokens_email")
  @@index([token_hash], map: "idx_password_reset_tokens_token_hash")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model payment_transactions {
  id                 Int       @id @default(autoincrement())
  order_id           String    @unique @db.VarChar(255)
  client_id          String    @db.VarChar(255)
  nuvama_code        String    @db.VarChar(50)
  client_name        String    @db.VarChar(255)
  amount             Decimal   @db.Decimal(10, 2)
  currency           String?   @default("INR") @db.VarChar(3)
  payment_type       String    @db.VarChar(20)
  payment_status     String?   @default("CREATED") @db.VarChar(50)
  payment_session_id String?   @db.VarChar(255)
  cf_order_id        String?   @db.VarChar(255)
  cf_subscription_id String?   @db.VarChar(255)
  account_number     String?   @db.VarChar(50)
  ifsc_code          String?   @db.VarChar(20)
  frequency          String?   @db.VarChar(20)
  start_date         DateTime? @db.Date
  end_date           DateTime? @db.Date
  total_installments Int?
  next_charge_date   DateTime? @db.Date
  created_at         DateTime? @default(now()) @db.Timestamptz(6)
  updated_at         DateTime? @default(now()) @db.Timestamptz(6)
  canceled_at        DateTime? @db.Timestamptz(6)
  is_new_strategy    Boolean?  @default(false)
  strategy_type      String?   @db.VarChar(10)

  @@index([client_id, payment_status], map: "idx_client_status")
  @@index([created_at], map: "idx_created_at")
  @@index([order_id], map: "idx_order_id")
  @@schema("public")
}

model pms_clients_audit_log {
  id                  Int       @id @default(autoincrement())
  operation_type      String    @db.VarChar(10)
  clientid            String    @db.VarChar(50)
  clientname          String?   @db.VarChar(255)
  old_data            Json?
  new_data            Json?
  changed_fields      String[]
  operation_timestamp DateTime? @default(now()) @db.Timestamp(6)
  batch_id            String?   @db.VarChar(50)
  notes               String?

  @@schema("public")
}

model pms_clients_master {
  id                          Int       @id @default(autoincrement())
  clientid                    String?   @db.VarChar(50)
  clientname                  String?   @db.VarChar(100)
  clientcode                  String?   @db.VarChar(50)
  clienttype                  String?   @db.VarChar(20)
  accounttype                 String?   @db.VarChar(20)
  account_open_date           DateTime? @db.Date
  inceptiondate               DateTime? @db.Date
  mobile                      String?   @db.VarChar(15)
  email                       String?   @db.VarChar(100)
  address1                    String?   @db.VarChar(200)
  address2                    String?   @db.VarChar(200)
  city                        String?   @db.VarChar(50)
  pincode                     String?   @db.VarChar(6)
  state                       String?   @db.VarChar(50)
  pannumber                   String?   @db.VarChar(10)
  ownerid                     String?   @db.VarChar(50)
  ownername                   String?   @db.VarChar(100)
  groupid                     String?   @db.VarChar(50)
  groupname                   String?   @db.VarChar(100)
  schemeid                    String?   @db.VarChar(50)
  schemename                  String?   @db.VarChar(100)
  advisorname                 String?   @db.VarChar(100)
  username                    String?   @db.VarChar(50)
  salutation                  String?   @db.VarChar(10)
  firstname                   String?   @db.VarChar(50)
  middlename                  String?   @db.VarChar(50)
  lastname                    String?   @db.VarChar(50)
  first_holder_gender         String?   @db.VarChar(20)
  created_at                  DateTime? @default(now()) @db.Timestamp(6)
  updated_at                  DateTime? @default(now()) @db.Timestamp(6)
  password                    String?   @default("Qode@123") @db.VarChar(100)
  head_of_family              Boolean?
  password_setup_token        String?   @db.VarChar(255)
  password_setup_expires      DateTime? @db.Timestamptz(6)
  password_set_at             DateTime? @db.Timestamptz(6)
  first_login_at              DateTime? @db.Timestamptz(6)
  onboarding_status           String?   @default("pending") @db.VarChar(20)
  login_attempts              Int?      @default(0)
  locked_until                DateTime? @db.Timestamptz(6)
  last_login_at               DateTime? @db.Timestamp(6)
  login_count                 Int?      @default(0)
  intermediaryname            String    @default("QODE ADVISORS LLP INT") @db.VarChar(255)
  intermediary_fee_percentage Decimal?  @default(0.00) @db.Decimal(5, 2)
  billgroup                   String?   @db.VarChar(100)

  @@index([clientid], map: "idx_pms_clients_master_clientid")
  @@index([email], map: "idx_pms_clients_master_email")
  @@index([mobile], map: "idx_pms_clients_master_mobile")
  @@index([pannumber], map: "idx_pms_clients_master_pannumber")
  @@index([onboarding_status], map: "idx_pms_clients_onboarding_status")
  @@index([password_setup_token], map: "idx_pms_clients_password_token")
  @@schema("public")
}

model pms_clients_master1 {
  id                     Int       @id @default(autoincrement())
  clientid               String?   @db.VarChar(50)
  clientname             String?   @db.VarChar(255)
  clientcode             String?   @db.VarChar(50)
  clienttype             String?   @db.VarChar(50)
  accounttype            String?   @db.VarChar(50)
  account_open_date      DateTime? @db.Date
  inceptiondate          DateTime? @db.Date
  mobile                 String?   @db.VarChar(15)
  email                  String?   @db.VarChar(255)
  address1               String?
  address2               String?
  city                   String?   @db.VarChar(100)
  pincode                String?   @db.VarChar(10)
  state                  String?   @db.VarChar(100)
  pannumber              String?   @db.VarChar(20)
  ownerid                String?   @db.VarChar(50)
  ownername              String?   @db.VarChar(255)
  groupid                String?   @db.VarChar(50)
  groupname              String?   @db.VarChar(255)
  schemeid               String?   @db.VarChar(50)
  schemename             String?   @db.VarChar(255)
  advisorname            String?   @db.VarChar(255)
  username               String?   @db.VarChar(100)
  salutation             String?   @db.VarChar(20)
  firstname              String?   @db.VarChar(100)
  middlename             String?   @db.VarChar(100)
  lastname               String?   @db.VarChar(100)
  first_holder_gender    String?   @db.VarChar(10)
  created_at             DateTime? @default(now()) @db.Timestamp(6)
  updated_at             DateTime? @default(now()) @db.Timestamp(6)
  password               String?   @db.VarChar(100)
  head_of_family         Boolean?
  password_setup_token   String?   @db.VarChar(255)
  password_setup_expires DateTime? @db.Timestamp(6)
  password_set_at        DateTime? @db.Timestamp(6)
  first_login_at         DateTime? @db.Timestamp(6)
  onboarding_status      String?   @default("PENDING") @db.VarChar(50)
  login_attempts         Int?      @default(0)
  locked_until           DateTime? @db.Timestamp(6)

  @@schema("public")
}

model pms_clients_master2 {
  id                  Int       @id(map: "pms_clients_master_pkey1") @default(autoincrement())
  clientid            String?   @db.VarChar(50)
  clientname          String?   @db.VarChar(100)
  clientcode          String?   @db.VarChar(50)
  clienttype          String?   @db.VarChar(20)
  accounttype         String?   @db.VarChar(20)
  account_open_date   DateTime? @db.Date
  inceptiondate       DateTime? @db.Date
  mobile              String?   @db.VarChar(15)
  email               String?   @db.VarChar(100)
  address1            String?   @db.VarChar(200)
  address2            String?   @db.VarChar(200)
  city                String?   @db.VarChar(50)
  pincode             String?   @db.VarChar(6)
  state               String?   @db.VarChar(50)
  pannumber           String?   @db.VarChar(10)
  ownerid             String?   @db.VarChar(50)
  ownername           String?   @db.VarChar(100)
  groupid             String?   @db.VarChar(50)
  groupname           String?   @db.VarChar(100)
  schemeid            String?   @db.VarChar(50)
  schemename          String?   @db.VarChar(100)
  advisorname         String?   @db.VarChar(100)
  username            String?   @db.VarChar(50)
  salutation          String?   @db.VarChar(10)
  firstname           String?   @db.VarChar(50)
  middlename          String?   @db.VarChar(50)
  lastname            String?   @db.VarChar(50)
  first_holder_gender String?   @db.VarChar(20)
  head_of_family      String?   @db.VarChar(5)
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  updated_at          DateTime? @default(now()) @db.Timestamp(6)

  @@schema("public")
}

model prop_account_default_tags {
  qcode        String   @unique
  deposit_tag  String
  nav_tag      String
  cashflow_tag String?
  created_at   DateTime @default(now()) @db.Timestamp(6)
  updated_at   DateTime @db.Timestamp(6)
  id           BigInt   @id @default(autoincrement())

  @@index([updated_at])
  @@schema("public")
}

model refresh_tokens {
  id          String    @id @db.Uuid
  user_id     String    @db.VarChar(255)
  token_hash  String
  expires_at  DateTime  @db.Timestamp(6)
  revoked     Boolean?  @default(false)
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  replaced_by String?   @db.Uuid

  @@schema("public")
}
